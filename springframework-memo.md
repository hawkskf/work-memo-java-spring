# SpringFramework学習メモ

私見を含みます。

## イメージ

SpringFramework + 何かという構成で、依存ライブラリを手動で管理しているXMLゴリゴリの非Java民お断りな一昔前のプロジェクトとSpringBootでさくっと作成したプロジェクトで断絶しており大きく違うイメージ。

SpringFrameworkのバージョンと、SpringBootを使っているかどうかは重要。情報を探すときにも。

*よく聞く「初学者はSpringFramework、Javaを難しいと感じる」理由は、歴史が長い分書き方ややり方が多く、検索でひっかかりにくい面もありそう。*

## Springの公式を読む

**SpringはJavaのWebアプリケーションフレームワークのSpringFrameworkを中心としたプロジェクト群の総称。**

→Springのプロジェクト名は全てSpring何かとなっているため混同しそうになるが、よく使われるのはSpringFrameworkと、SpringFrameworkと他のSpring何かを楽に構築できるSpringBootで、その他のSpring何かはSpringFrameworkの特殊機能追加として採用を検討されるイメージ。

## SpringFrameworkの概要

**Webアプリケーションフレームワーク。**

**DI（dependency injection）の多用が特徴。**

DIはアノテーション・Javaコード・XMLのやり方がある。

古くはXMLしかなかったためXMLが多いが、XMLは複雑になりがちなので新規システムなら回避推奨。

Web送受信周り、データバインド、データベース、テストなどで決まったやり方と仕組みができているので、利用するだけでできて良い。

SpringFrameworkといえばWebアプリケーションのフレームワークでWebアプリケーションでの必要な機能が入っているイメージ。

足りない機能は他のSpring何か を導入する。

バージョンの差異でDIのやり方など、書き方が変わっていることが多いので注意する。

[Core Technologies](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html)

---

## SpringBootの概要

そこそこ新しい。SpringFrameworkを中心に、Spring何かと使用するミドルウェアを選択して動かせるスターター。

SpringFrameworkとSpring何かミドルウェアを自分で必要なぶんを選んで組み合わせてシステムを構築するのは手間で複雑になる。SpringFrameworkはDIで抽象性が高いため更に複雑。

Spring Bootでは、どのような目的でシステムを作るのかに応じて、必要な設定とライブラリなどの依存関係を解決するための情報が定義セットとして管理されている。（**starter**）

Tomcatも組み込まれるなどミドルウェアの設定が楽になっている。

新規開発だとSpringBoot一択。

欠点は、SpringBootは始めればすぐにWebアプリが動き出すほど簡単だが、中で動いているのはSpringFrameworkやSpring何かなので、詳しくカスタムして仕様を満たすようにするためにはそれぞれの理解が必要になる。どこで何を何のために使っているのかを理解することが重要。

**Spring Initializr**を使えばWeb上でぽちぽちするだけで新規SpringBootのプロジェクトが作成できる。

---

## DIって何のためにやるのか

- 疎結合な設計がしやすい
- 単体テストが作りやすくなる現実解
  - 依存モジュールを切り離すことができるようになり、クラスの責務が明確になるため
- 実際にはSpringなど、DI使用を前提としているフレームワークでは、そのやり方に乗って同じようにやることが楽かつうまくいく。
  「フレームワークどおりに作る→DIを使っていること、DIしている箇所を認識する」で学習。
  - フレームワークはDIコンテナが内包されている。
  - フレームワークがない、フレームワークにDIがないなどの場合は、DIを導入するかどうかは要検討。しないほうが良い場合も多い。する場合はDIコンテナを使う。

↓参考

[DI (依存性注入) って何のためにするのかわからない人向けに頑張って説明してみる](https://qiita.com/okazuki/items/a0f2fb0a63ca88340ff6)

[DI って何でするのかわからない人向けに頑張って説明してみる「本来の意味」](https://qiita.com/okazuki/items/a0f2fb0a63ca88340ff6)

---

### SpringFrameworkでのKotlin

SpringFrameworkはJavaの代わりにKotlinも使用できる。

KotlinはJavaバイトコードにコンパイル可能で、構文などでJavaの不満点を解消するなどJava拡張の性質がある言語。

Kotlinは確かにJavaよりは書きやすいが、Javaがバージョンが上がるにつれて良くなっていることや人員募集がしにくいので採用するのは難しいかも

---

## SpringFrameworkのサポート
>
> サポートされているバージョン
>
> - 5.3.xは、第5世代の最終機能ブランチであり、最新の生産ライン（2020年10月現在のGA）であり、JDK 8、JDK 11、JDK17で長期サポートが提供されています。
> - 5.2.xは以前の生産ライン（2019年9月現在のGA）であり、2021年末まで積極的にサポートされます。
> - 5.1.xおよび5.0.xは現在アクティブにサポートされておらず、2020年12月の時点で5.2.xおよび5.3.xに置き換えられています。
> - *4.3.xは、2020年12月31日に公式のEOL（保守終了）に達しました。このラインでは、これ以上のメンテナンスおよびセキュリティパッチは計画されていません。*
> - *3.2.xは、2016年12月31日に公式のEOL（保守終了）に達しました。このラインでは、これ以上のメンテナンスおよびセキュリティパッチは計画されていません。*

[Spring Framework Versions](https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-Versions)

規模が大きくユーザーも多い分、脆弱性の発見も早い。

バージョンアップはこまめに行う必要があるため、5より前を使っているならかなり危険。

社内ネットワークのみの利用なら、古いバージョンをそのまま使っている場合も多そう……？